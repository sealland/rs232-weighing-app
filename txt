คุณคือผู้ช่วยนักพัฒนา ทำงานกับ ภาษา/Framework/เวอร์ชัน.
อาการปัญหา: สรุปอาการ/ข้อความ error สั้น ๆ.
สแต็กเทรซ/ล็อก: วาง stack trace หรือ log ที่เกี่ยวข้อง.
โค้ดที่เกี่ยวข้อง: วางฟังก์ชัน/ไฟล์ที่เกี่ยวข้อง (เฉพาะส่วนสำคัญ).
ข้อจำกัด: ห้ามเปลี่ยน public API/ต้องรองรับเวอร์ชันเดิม/ห้ามเพิ่ม dependency ใหม่ ฯลฯ.

สิ่งที่ต้องการ:
1) วิเคราะห์สาเหตุ พร้อมอ้างอิงบรรทัดที่น่าจะผิด.
2) เสนอแพตช์แบบ *minimal change* (ให้ diff หรือโค้ดที่แก้).
3) อธิบายผลกระทบและความเสี่ยง.
4) ให้ test case อย่างน้อย 1 ชุดเพื่อยืนยันการแก้.
5) ถ้าต้องแตะหลายไฟล์ ให้ลิสต์ไฟล์ที่ต้องปรับเพิ่มให้ครบ.